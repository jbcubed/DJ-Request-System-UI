<!-- Busy Screen Overlay -->
<app-busy-screen 
  [isVisible]="(isLoading$ | async) || false" 
  message="Processing your request..."
  [showSpinner]="true">
</app-busy-screen>

<app-dj-sys-header></app-dj-sys-header>

<main class="container-fluid py-4">
  <router-outlet />
  
  <!-- Demo section for DjTextBox -->
  <div class="container mt-4">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title mb-0">
              <i class="fas fa-keyboard me-2 text-primary"></i>
              Form Input Components Demo
            </h3>
          </div>
          <div class="card-body">
            <form [formGroup]="demoForm" (ngSubmit)="onSubmit()">
              <div class="row">
                <!-- Basic Text Input -->\n                <div class="col-md-6 mb-3">
                  <app-dj-text-box
                    label="First Name"
                    formControlName="firstName"
                    placeholder="Enter your first name"
                    [required]="true"
                    helpText="Please enter your legal first name"
                    [errorMessage]="getErrorMessage('firstName')">
                  </app-dj-text-box>
                </div>
                
                <!-- Email Input with Left Label -->\n                <div class="col-md-6 mb-3">
                  <app-dj-text-box
                    label="Email Address"
                    formControlName="email"
                    type="email"
                    placeholder="your.email@example.com"
                    labelPosition="left"
                    [required]="true"
                    [errorMessage]="getErrorMessage('email')">
                  </app-dj-text-box>
                </div>
                
                <!-- Phone Number -->\n                <div class="col-md-6 mb-3">
                  <app-dj-text-box
                    label="Phone Number"
                    formControlName="phone"
                    type="tel"
                    placeholder="(555) 123-4567"
                    helpText="Format: (XXX) XXX-XXXX"
                    [errorMessage]="getErrorMessage('phone')">
                  </app-dj-text-box>
                </div>
                
                <!-- Hidden Label Example -->\n                <div class="col-md-6 mb-3">
                  <app-dj-text-box
                    formControlName="search"
                    type="search"
                    placeholder="Search for songs or artists..."
                    [showLabel]="false"
                    ariaLabel="Search for songs or artists">
                  </app-dj-text-box>
                </div>
              </div>
              
              <!-- Textarea Examples -->
              <div class="row mt-4">
                <div class="col-12">
                  <h5 class="text-primary mb-3">
                    <i class="fas fa-align-left me-2"></i>
                    Textarea Components
                  </h5>
                </div>
                
                <!-- Basic Textarea -->
                <div class="col-md-6 mb-3">
                  <app-dj-text-area
                    label="Comments"
                    formControlName="comments"
                    placeholder="Enter your comments here..."
                    [rows]="4"
                    [maxLength]="500"
                    [showCharacterCount]="true"
                    helpText="Optional comments about your request"
                    [errorMessage]="getErrorMessage('comments')">
                  </app-dj-text-area>
                </div>
                
                <!-- Auto-growing Textarea -->
                <div class="col-md-6 mb-3">
                  <app-dj-text-area
                    label="Event Description"
                    formControlName="description"
                    placeholder="Describe the event, music preferences, special requests..."
                    [required]="true"
                    [autoGrow]="true"
                    [minRows]="3"
                    [maxRows]="8"
                    [maxLength]="1000"
                    [showCharacterCount]="true"
                    labelPosition="left"
                    helpText="Please provide detailed information to help us serve you better"
                    [errorMessage]="getErrorMessage('description')">
                  </app-dj-text-area>
                </div>
                
                <!-- Resizable Textarea -->
                <div class="col-12 mb-3">
                  <app-dj-text-area
                    label="Additional Notes"
                    formControlName="notes"
                    placeholder="Any additional notes or special instructions..."
                    [rows]="6"
                    resize="both"
                    helpText="This textarea can be resized both horizontally and vertically">
                  </app-dj-text-area>
                </div>
              </div>
              
              <div class="row mt-4">
                <div class="col-12">
                  <button type="submit" class="btn btn-primary me-2" [disabled]="demoForm.invalid">
                    <i class="fas fa-save me-1"></i>
                    Submit Form
                  </button>
                  <button type="button" class="btn btn-outline-secondary me-2" (click)="resetForm()">
                    <i class="fas fa-undo me-1"></i>
                    Reset
                  </button>
                  <button type="button" class="btn btn-outline-info me-2" (click)="simulateApiCall()">
                    <i class="fas fa-cloud me-1"></i>
                    Test HTTP Loading
                  </button>
                  <button type="button" class="btn btn-outline-warning" (click)="testManualLoading()">
                    <i class="fas fa-spinner me-1"></i>
                    Test Manual Loading
                  </button>
                </div>
              </div>
            </form>
            
            <!-- Loading System Info -->
            <div class="mt-4 p-3 bg-info bg-opacity-10 rounded border border-info">
              <h5 class="text-info">
                <i class="fas fa-info-circle me-2"></i>
                Loading System Features
              </h5>
              <ul class="mb-3">
                <li><strong>HTTP Interceptor:</strong> Automatically shows loading screen for HTTP requests</li>
                <li><strong>Smart Counting:</strong> Handles multiple concurrent requests properly</li>
                <li><strong>Skip Headers:</strong> Use 'X-Skip-Loading' header to bypass loading for specific requests</li>
                <li><strong>Manual Control:</strong> LoadingService can be used for non-HTTP operations</li>
                <li><strong>Accessible:</strong> Screen reader friendly with ARIA attributes</li>
                <li><strong>Themed:</strong> DJ-themed spinner with vinyl record animation</li>
              </ul>
              <p class="mb-0">
                <strong>Current Status:</strong> 
                <span class="badge" [class]="(isLoading$ | async) ? 'bg-warning' : 'bg-success'">
                  {{ (isLoading$ | async) ? 'LOADING' : 'IDLE' }}
                </span>
              </p>
            </div>
            
            <!-- Form Status Display -->\n            <div class="mt-4 p-3 bg-light rounded">
              <h5>Form Status:</h5>
              <p><strong>Valid:</strong> {{ demoForm.valid }}</p>
              <p><strong>Form Value:</strong></p>
              <pre>{{ demoForm.value | json }}</pre>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
